---
title: 位运算
order: 4
---

## 某个二进制数只保留最右侧的 1，其他位置变为 0

解析:

1. 不妨认为该二进制数第一个 1 右边如下: 10000
2. 取反后如下: 01111
3. +1 后如下: 10000，即和原来值相同
4. 两个数前半部分取与后变为 000...000，右边变成 10000，即只保留了最右边的 1 位置。

```javascript
const takeRightMostOne = function(num) {
  return num & (~num + 1);
};
```

## 某个数除 2

解析:

1. 2(10)右移一位（01）变成 1
2. 3(11)右移一位 (01) 变成 1
3. 4(100)右移一位 (010) 变成 2
4. 右移相当于除以 2，左移相当于乘以 2
5. 类比到任何进制，10 进制左移 1 位相当于\*10，右移相当于/10

```javascript
const div2 = function(num) {
  return div2 >> 1;
};
```

## 求中点

1. 获取中点有几种方式，可以是 (L+R) /2，但是如果 LR 比较大的时候，可能 L+R 会溢出
2. 或者 `L + ((R-L)/2)`，这种不会溢出
3. 使用位运算代替/2 运算会更快

```javascript
const getMid = function(num1, num2) {
  return num1 + ((num2 - num1) >> 1);
};
```
